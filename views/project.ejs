<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Projects | AmiiCAD | Amit Sharma</title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="website icon" type="jpg" href="/Images/logo.jpg">
    <link rel="stylesheet" href="/css/mediaqueries.css" />

</head>
<style>
  nav, .nav-links {
      display: flex;
    }

    nav {
      justify-content: space-around;
      align-items: center;
      height: 17vh;
    }

    .nav-links {
      gap: 2rem;
      list-style: none;
      font-size: 1.5rem;
    }
    .article-container{
      overflow: hidden;
    }
    .article-container img:hover{
      transform: scale(1.15);
    }
</style>

<body>
    <nav id="desktop-nav">
        <div class="logo"><b>AmiiCAD</b></div>
        <div>
          <ul class="nav-links">
            <li><a href="/">Home</a></li>
            <li><a href="/#experience">Experience</a></li>
            <li><a style="background-color: gray; color: white; border-radius: 30px; padding: 5px 10px;" href="./project.html">Projects</a></li>
            <li><a href="./contact.html">Contact</a></li>
            <li><a href="/#contact">Log in</a></li>
          </ul>
        </div>
      </nav>
      <nav id="hamburger-nav">
        <div class="logo">AmiiCAD</div>
        <div class="hamburger-menu">
          <div class="hamburger-icon" onclick="toggleMenu()">
            <span></span>
            <span></span>
            <span></span>
          </div>
          <div class="menu-links">
            <li><a href="/" onclick="toggleMenu()">Home</a></li>
            <li><a href="/#experience" onclick="toggleMenu()">Experience</a></li>
            <li><a href="/project" onclick="toggleMenu()">Projects</a></li>
            <li><a href="/contact" onclick="toggleMenu()">Contact</a></li>
            <li><a href="/#contact" onclick="toggleMenu()">Log in</a></li>
          </div>
        </div>
      </nav>

      <section id="projects">
  <p class="section__text__p1">
    Browse My All Recent
  </p>
  <h1 class="title">Projects</h1>

  <div class="projects-grid">
    <% images.sort((a,b) => new Date(b.createdAt) - new Date(a.createdAt))
        .forEach(project => { %>
      <div class="project-card">
        <div class="project-image-container">
          <img src="<%= project.urls[0] %>" alt="<%= project.title %>" class="project-img">
        </div>
        <h3 class="project-title"><%= project.title %></h3>
       <button class="btn btn-primary project-btn" 
        data-id="<%= project._id %>" 
        data-title="<%= project.title %>" 
        data-description="<%= project.description %>" 
        data-download="<%= project.downloadUrl %>" 
        data-urls='<%= JSON.stringify(project.urls) %>'>
  View More
</button>


        <% if(user && user.isAdmin) { %>
          <label>
            Show on Home:
            <input type="checkbox" class="toggle-home" data-id="<%= project._id %>" <%= project.showOnHome ? 'checked' : '' %> />
          </label>
        <% } %>
      </div>
    <% }) %>
  </div>
</section>
<div class="overlay" id="productPopupOverlay">
  <div class="popup">
    <div class="popup-left">
      <img id="popupMainImage" src="" alt="Product Image" class="main-popup-image">
      <div class="popup-image-gallery" id="popupImageGallery"></div>
    </div>
    <div class="popup-right">
      <h2 id="popupTitle"></h2>
      <p id="popupDescription"></p>
      <div class="popup-buttons">
        <a id="popupDownloadBtn" href="#" target="_blank">
          <button class="btn btn-success">Download</button>
        </a>
        <button class="btn btn-primary" onclick="shareProduct()">Share</button>
        <button class="btn btn-secondary" onclick="closeProductPopup()">Close</button>
      </div>
    </div>
    <div class="close-btn" onclick="closeProductPopup()">âœ–</div>
  </div>
</div>




          
          <div style="justify-content: center;" class="about-containers">
            <footer>
              <nav>
                <div class="nav-links-container">
                  <ul class="nav-links">
                    <li><a href="/">Home</a></li>
                    <li><a href="/#about">About</a></li>
                    <li><a href="/#experience">Experience</a></li>
                    <li><a href="/project">Projects</a></li>
                    <li><a href="/contact">Contact</a></li>
                  </ul>
                </div>
              </nav>
              <p>Copyright &#169; 2024 AmiiCAD || Design and created by <a href="https://www.linkedin.com/company/rixi-lab/" style="text-decoration: none; color: #555555;">Rixi Lab</a>. All Rights Reserved.</p>
            </footer>
          </div>
        </div>
      </section>
      <script>
       // Attach popup functionality to all "View More" buttons
 document.querySelectorAll(".project-btn").forEach(btn => {
  btn.addEventListener("click", () => {
    const overlay = document.getElementById('productPopupOverlay');
    overlay.style.display = 'flex';

    const title = btn.dataset.title;
    const description = btn.dataset.description;
    const download = btn.dataset.download;
    const urls = JSON.parse(btn.dataset.urls);

    document.getElementById('popupTitle').innerText = title;
    document.getElementById('popupDescription').innerText = description;
    document.getElementById('popupDownloadBtn').href = download;

    const mainImage = document.getElementById('popupMainImage');
    mainImage.src = urls[0];

    const gallery = document.getElementById('popupImageGallery');
    gallery.innerHTML = '';
    urls.forEach(url => {
      const img = document.createElement('img');
      img.src = url;
      img.style.cursor = 'pointer';
      img.onclick = () => mainImage.src = url;
      gallery.appendChild(img);
    });

    window.currentProduct = { title, description, download, urls };
  });
});

  function closeProductPopup() {
    document.getElementById('productPopupOverlay').style.display = 'none';
  }

  function shareProduct() {
    if (!window.currentProduct) return;
    const shareText = `Check out this product: ${window.location.href}#product-${window.currentProduct._id}`;
    if (navigator.share) {
      navigator.share({
        title: window.currentProduct.title,
        text: shareText,
        url: window.location.href
      }).catch(console.error);
    } else {
      navigator.clipboard.writeText(shareText).then(() => alert('Product link copied!'));
    }
  }
</script>
</body>
</html>